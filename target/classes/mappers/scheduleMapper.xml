<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.spring.springGroupS.dao.ScheduleDAO">

	<select id="getScheduleList" resultType="com.spring.springGroupS.vo.ScheduleVO">
	  <!-- select * from schedule where mid=#{mid} and substring(sDate, 1, 7)=#{ym} order by sDate; -->
	  <!-- select idx,mid,sDate,part,content, count(part) as partCnt from schedule where mid=#{mid} and substring(sDate, 1, 7)=#{ym} group by sDate,part order by sDate; -->
	  select mid,sDate,part,content,count(part) as partCnt 
	    from schedule where (part='공지' or mid = #{mid}) and (date_format(sDate, '%Y-%m') = #{ym}) 
	    group by sDate,part order by sDate, part;
	</select>
	
	<select id="getScheduleMenu" resultType="com.spring.springGroupS.vo.ScheduleVO">
	  select * from schedule where mid=#{mid} and date_format(sDate, '%Y-%m-%d')=#{ymd};
	</select>
	
	
	
	
	<insert id="setScheduleInputOk">
		insert into schedule values (default, #{vo.mid}, #{vo.ymd}, #{vo.part}, #{vo.content});
	</insert>
	
	
	
	<update id="setScheduleUpdateOk">
	  update schedule set part = #{vo.part}, content=#{vo.content} where idx=#{vo.idx};
	</update>
	
	
	
	<delete id="setScheduleDeleteOk">
	  delete from schedule where idx = #{idx};
	</delete>
	

</mapper>